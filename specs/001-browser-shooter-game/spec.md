# Feature Specification: ブラウザシューティングゲーム

**Feature Branch**: `001-browser-shooter-game`  
**Created**: 2025年10月19日  
**Status**: Draft  
**Input**: User description: "開始画面で START ボタンをクリックすると、ゲーム画面に遷移する。ユーザーはマウスで自機を操作し、クリック中は継続的に弾を発射する。敵の弾が自機に当たるとゲームオーバー。自機の弾が敵に当たるとスコアアップ。最終的なスコアをブラウザ上のストレージに保存する。DBは不要。"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - ゲーム開始とプレイ (Priority: P1)

ユーザーはブラウザでゲームにアクセスし、開始画面のSTARTボタンをクリックしてゲームを開始します。ゲーム画面では、マウスで自機を操作し、マウスクリック中は継続的に弾を発射してプレイします。

**Why this priority**: ゲームの核となる機能であり、これがなければゲームとして成立しません。最小限の価値を提供するために必要不可欠です。

**Independent Test**: 開始画面からゲーム画面への遷移と基本的なマウス操作による自機移動と射撃機能をテストできます。

**Acceptance Scenarios**:

1. **Given** ユーザーが開始画面にいる、**When** STARTボタンをクリックする、**Then** ゲーム画面に遷移する
2. **Given** ゲーム画面にいる、**When** マウスを移動する、**Then** 自機がマウスの位置に追従して移動する
3. **Given** ゲーム画面にいる、**When** マウスをクリックし続ける、**Then** 自機から継続的に弾が発射される
4. **Given** ゲーム画面にいる、**When** マウスクリックを離す、**Then** 弾の発射が停止する

---

### User Story 2 - 敵との戦闘とスコアシステム (Priority: P2)

ユーザーは発射した弾で敵を倒してスコアを獲得します。敵の弾が自機に当たるとゲームオーバーになります。

**Why this priority**: ゲームの目標と挑戦要素を提供し、プレイヤーの達成感を生み出すために重要です。

**Independent Test**: 敵の出現、弾の当たり判定、スコア加算、ゲームオーバー条件をテストできます。

**Acceptance Scenarios**:

1. **Given** ゲーム中に敵が存在する、**When** 自機の弾が敵に当たる、**Then** 敵が消滅しスコアが加算される
2. **Given** ゲーム中に敵の弾が存在する、**When** 敵の弾が自機に当たる、**Then** ゲームオーバー画面が表示される
3. **Given** ゲーム中、**When** プレイ中、**Then** 現在のスコアがリアルタイムで表示される

---

### User Story 3 - スコア保存と履歴 (Priority: P3)

ユーザーはゲーム終了時に最終スコアがブラウザのローカルストレージに保存され、過去の記録を確認できます。

**Why this priority**: プレイヤーの継続的なエンゲージメントを促進し、改善の動機を提供します。

**Independent Test**: ゲーム終了時のスコア保存とストレージからのスコア取得をテストできます。

**Acceptance Scenarios**:

1. **Given** ゲームオーバーになった、**When** ゲーム終了、**Then** 最終スコアがブラウザのローカルストレージに保存される
2. **Given** 過去にゲームをプレイした、**When** ゲームにアクセスする、**Then** 開始画面に過去の最高スコア（ハイスコア）が表示される

---

### Edge Cases

- 敵の弾と自機の弾が同時に当たった場合の処理優先順位
- ブラウザタブが非アクティブになった時のゲーム状態の処理（時間は停止するか継続するか）
- ローカルストレージが利用できない環境での動作（ハイスコアが表示できない場合）
- マウスがブラウザウィンドウ外に出た場合の自機の動作
- 制限時間終了と同時に敵を倒した場合のスコア処理
- 制限時間終了と同時に自機が被弾した場合の処理

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: システムは開始画面にSTARTボタンを表示しなければならない
- **FR-002**: システムはSTARTボタンクリック時にゲーム画面に遷移しなければならない  
- **FR-003**: システムはマウスの位置に応じて自機を移動させなければならない
- **FR-004**: システムはマウスクリック中に自機から継続的に弾を発射しなければならない
- **FR-005**: システムは敵キャラクターを画面に出現させなければならない
- **FR-006**: システムは敵から弾を発射させなければならない
- **FR-007**: システムは自機の弾と敵の当たり判定を検出しなければならない
- **FR-008**: システムは敵の弾と自機の当たり判定を検出しなければならない
- **FR-009**: システムは敵を倒した時にスコアを加算しなければならない
- **FR-010**: システムは自機が敵の弾に当たった時にゲームオーバーにしなければならない
- **FR-011**: システムは最終スコアをブラウザのローカルストレージに保存しなければならない
- **FR-012**: システムは現在のスコアをリアルタイムで表示しなければならない
- **FR-013**: システムはランダムな位置とタイミングで敵を出現させなければならない
- **FR-014**: システムは自機被弾または制限時間到達時にゲームオーバーにしなければならない
- **FR-015**: システムは開始画面に過去の最高スコア（ハイスコア）を表示しなければならない
- **FR-016**: システムはゲームの制限時間を設定しなければならない

### Key Entities

- **自機**: プレイヤーが操作するキャラクター（位置、体力状態）
- **自機の弾**: 自機から発射される攻撃オブジェクト（位置、移動方向、速度）
- **敵**: プレイヤーが倒す対象となるキャラクター（位置、体力、移動パターン）
- **敵の弾**: 敵から発射される攻撃オブジェクト（位置、移動方向、速度）
- **スコア記録**: ゲーム結果として保存されるデータ（スコア値、プレイ日時）

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: ユーザーは開始画面からゲーム画面への遷移を1秒以内に完了できる
- **SC-002**: ユーザーはマウス操作による自機の移動を遅延なく（100ms以内）で実行できる
- **SC-003**: システムは60FPSでスムーズなゲームプレイを提供する
- **SC-004**: ユーザーの90%以上が基本操作（移動と射撃）を初回プレイで理解できる
- **SC-005**: スコア保存機能は100%の成功率でローカルストレージに記録される
- **SC-006**: ゲームは一般的なブラウザ（Chrome、Firefox、Safari、Edge）で動作する

## Assumptions

- ゲームはシングルプレイヤー専用とします
- 敵の種類は1種類から開始し、基本的な移動パターンを持ちます
- 自機と敵の弾は直線的に移動します
- ゲーム画面サイズは一般的なブラウザウィンドウに適したサイズとします
- 音響効果は最初のバージョンでは含めません
- パフォーマンス要件は一般的なデスクトップブラウザ環境を想定します
- 制限時間は標準的なゲームセッション（例：2〜5分）を想定します
- 敵の出現頻度は適度な難易度を保つよう調整されます
- ハイスコアは1件のみ（最高点）を保存します

